### 内存的虚拟化（上）———— 缘起

#### 伊始
最开始制造计算机的目的是为了辅助人进行计算。工作方式大致是：操作者输入一道计算式，机器执行，返回结果。那时，要运行一次程序十分麻烦，具体来说：先将程序刻入纸带，再使用读卡机将程序读入到内存的指定位置，最后初始化CPU，设置第一条指令的地址，执行程序。在这个过程中人工加载时间远大于机器执行时间，同时由于需要大量人工操作，便容易引入许多错误。因此为提高计算机的使用效率与稳定性。批处理系统出现了。

#### 批处理系统
批处理系统的想法很简单，操作者一次提交多个任务，由机器完成任务的加载与衔接。这样就完成了减少人工干预与提高使用效率的目标。那么它又是如何实现的呢？在批处理系统中，驻留着一个监控程序，由该监控程序完成任务之间的衔接。  
监控程序的出现有着重要的意义。它是现代操作系统的雏形，更是由机器代替人繁复劳动思想的萌芽。批处理系统在执行程序时，每次在内存驻留一个程序，执行完后，加载另一个程序。我们称这种执行为串行执行。  
但是，这种执行方式有着硬件利用率不高的问题。当一个程序读取I/O资源时，CPU会空闲。为了解决这个问题，一个比较好的办法是让多道程序同时驻留内存，这种批处理系统被称为多道批处理系统。当一个程序读取内存时，监控程序会调用另一个已准备好的程序执行。这确实是一个好方法，若要实现这个方法，有诸多困难。其中有两个主要的困难：

- （1）A程序访问B程序的内存。例如：A程序的地址范围是`0x1000000`到`0x10001000`，B程序的地址范围是`0x00001000`到`0x00010000`。但是A在运行时却向`0x00001011`处写入了数据。
- （2）开发程序时，需要小心的使用内存的物理地址。例如：操作者设计了一个地址范围是`0x00001010`到`0x00001111`。但这台机器中已经有一个运行在`0x00001100`到`0x00010000`的程序了。

可以看出这两个问题，一个是运行时，一个是开发时。同时产生这两个问题的原因是相同的，都源于直接使用了内存物理地址。而解决这些问题的主流方法是————**内存的虚拟化**。  
下一篇将围绕**虚拟化的实现**与**探究为什么能解决上面的两个问题**。
